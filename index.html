<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>D·∫£i Ng√¢n H√†</title>
  </head>

  <style>
    @import url("https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&family=Poppins:wght@400;600&display=swap");

    body {
      overflow: hidden;
      margin: 0;
      background-color: black;
    }

    @keyframes glowPulse {
      0% {
        opacity: 0.7;
        filter: blur(0.5px);
        text-shadow: 0 0 8px #d0aaff, 0 0 15px #ffd700, 0 0 25px #b57fff;
      }
      50% {
        opacity: 1;
        filter: blur(1px);
        text-shadow: 0 0 15px #ffe17a, 0 0 35px #f0f, 0 0 60px #fff3b0;
      }
      100% {
        opacity: 0.7;
        filter: blur(0.5px);
        text-shadow: 0 0 8px #d0aaff, 0 0 15px #ffd700, 0 0 25px #b57fff;
      }
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes float {
      0% {
        transform: translate(-50%, 0);
      }
      50% {
        transform: translate(-50%, -5px);
      }
      100% {
        transform: translate(-50%, 0);
      }
    }

    .star-text {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      font-family: "Dancing Script", "Poppins", sans-serif;
      font-weight: 600;
      letter-spacing: 0.5px;
      color: #fffbea;
      font-size: 3vh;
      text-align: center;
      animation: glowPulse 4s ease-in-out infinite, fadeIn 3s ease forwards,
        float 6s ease-in-out infinite;
      text-shadow: 0 0 10px rgba(255, 255, 200, 0.7),
        0 0 20px rgba(255, 200, 255, 0.6), 0 0 30px rgba(255, 240, 100, 0.4);
    }

    #text-top {
      top: 7%;
      background: linear-gradient(to right, #ffe17a, #c9a0ff, #ffe17a);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-size: 3.2vh;
    }

    #text-bottom {
      bottom: 7%;
      background: linear-gradient(to right, #ffb3c6, #fff5a3, #ffb3c6);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-size: 3.4vh;
    }

    /* üåô Ch·ªØ cong ·ªü g√≥c ph·∫£i */
    #curved-text {
      position: absolute;
      top: 3%;
      right: 3%;
      font-family: "Dancing Script", "Poppins", sans-serif;
      font-weight: 600;
      font-size: 2.8vh;
      color: #ffe6fa;
      background: linear-gradient(to right, #ffc6ff, #ffd6a5, #caffbf);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      transform: rotate(10deg);
      letter-spacing: 1px;
      animation: glowPulse 5s ease-in-out infinite, fadeIn 2s ease forwards;
      text-shadow: 0 0 10px rgba(255, 190, 250, 0.8),
        0 0 20px rgba(255, 230, 255, 0.6), 0 0 35px rgba(255, 200, 255, 0.5);
    }
  </style>

  <body>
    <div id="text-top" class="star-text">
      Th·∫≠t tuy·ªát v·ªùi v√¨ ƒë√£ t√¨m ƒë∆∞·ª£c em,<br />v√¨ sao s√°ng nh·∫•t gi·ªØa ng√¢n h√† r·ªông
      l·ªõn n√†y
    </div>

    <div id="text-bottom" class="star-text">Y√™u em th·∫≠t nhi·ªÅu üí´</div>

    <!-- üíñ Ch·ªØ cong g√≥c ph·∫£i -->
    <div id="curved-text">Em b√© Th√πy Anh</div>

    <script type="module">
      import * as THREE from "https://cdn.skypack.dev/three@0.136.0";
      import { OrbitControls } from "https://cdn.skypack.dev/three@0.136.0/examples/jsm/controls/OrbitControls";

      console.clear();

      let scene = new THREE.Scene();
      scene.background = new THREE.Color(0x160016);

      let camera = new THREE.PerspectiveCamera(
        60,
        innerWidth / innerHeight,
        1,
        1000
      );
      camera.position.set(0, 4, 21);

      let renderer = new THREE.WebGLRenderer({ antialias: true });
      renderer.setSize(innerWidth, innerHeight);
      document.body.appendChild(renderer.domElement);

      window.addEventListener("resize", () => {
        camera.aspect = innerWidth / innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(innerWidth, innerHeight);
      });

      let controls = new OrbitControls(camera, renderer.domElement);
      controls.enableDamping = true;
      controls.enablePan = false;

      let gu = { time: { value: 0 } };

      let sizes = [];
      let shift = [];
      let pushShift = () => {
        shift.push(
          Math.random() * Math.PI,
          Math.random() * Math.PI * 2,
          (Math.random() * 0.9 + 0.1) * Math.PI * 0.1,
          Math.random() * 0.9 + 0.1
        );
      };

      // ‚ú® Thu nh·ªè d·∫£i ng√¢n h√† c√≤n 70%
      const SCALE_FACTOR = 0.7;

      let pts = new Array(50000).fill().map(() => {
        sizes.push(Math.random() * 1.5 + 0.5);
        pushShift();
        return new THREE.Vector3()
          .randomDirection()
          .multiplyScalar((Math.random() * 0.5 + 9.5) * SCALE_FACTOR);
      });

      for (let i = 0; i < 100000; i++) {
        let r = 10 * SCALE_FACTOR,
          R = 40 * SCALE_FACTOR;
        let rand = Math.pow(Math.random(), 1.5);
        let radius = Math.sqrt(R * R * rand + (1 - rand) * r * r);
        pts.push(
          new THREE.Vector3().setFromCylindricalCoords(
            radius,
            Math.random() * 2 * Math.PI,
            (Math.random() - 0.5) * 2 * SCALE_FACTOR
          )
        );
        sizes.push(Math.random() * 1.5 + 0.5);
        pushShift();
      }

      let g = new THREE.BufferGeometry().setFromPoints(pts);
      g.setAttribute("sizes", new THREE.Float32BufferAttribute(sizes, 1));
      g.setAttribute("shift", new THREE.Float32BufferAttribute(shift, 4));

      let m = new THREE.PointsMaterial({
        size: 0.125,
        transparent: true,
        depthTest: false,
        blending: THREE.AdditiveBlending,
        onBeforeCompile: (shader) => {
          shader.uniforms.time = gu.time;
          shader.vertexShader = `
          uniform float time;
          attribute float sizes;
          attribute vec4 shift;
          varying vec3 vColor;
          ${shader.vertexShader}
        `
            .replace(`gl_PointSize = size;`, `gl_PointSize = size * sizes;`)
            .replace(
              `#include <color_vertex>`,
              `#include <color_vertex>
            float d = length(abs(position) / vec3(40., 10., 40.));
            d = clamp(d, 0., 1.);
            vColor = mix(vec3(227., 155., 0.), vec3(100., 50., 255.), d) / 255.;
          `
            )
            .replace(
              `#include <begin_vertex>`,
              `#include <begin_vertex>
            float t = time;
            float moveT = mod(shift.x + shift.z * t, PI2);
            float moveS = mod(shift.y + shift.z * t, PI2);
            transformed += vec3(cos(moveS) * sin(moveT), cos(moveT), sin(moveS) * sin(moveT)) * shift.a;
          `
            );

          shader.fragmentShader = `
          varying vec3 vColor;
          ${shader.fragmentShader}
        `
            .replace(
              `#include <clipping_planes_fragment>`,
              `#include <clipping_planes_fragment>
            float d = length(gl_PointCoord.xy - 0.5);
          `
            )
            .replace(
              `vec4 diffuseColor = vec4( diffuse, opacity );`,
              `vec4 diffuseColor = vec4( vColor, smoothstep(0.5, 0.1, d));`
            );
        },
      });

      let p = new THREE.Points(g, m);
      p.rotation.order = "ZYX";
      p.rotation.z = 0.2;
      scene.add(p);

      let clock = new THREE.Clock();
      renderer.setAnimationLoop(() => {
        controls.update();
        let t = clock.getElapsedTime() * 0.5;
        gu.time.value = t * Math.PI;
        p.rotation.y = t * 0.05;
        renderer.render(scene, camera);
      });
    </script>
  </body>
</html>
